package com.example.readysetappv1;

import androidx.appcompat.app.AppCompatActivity;

import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.graphics.Color;
import android.os.Bundle;
import android.text.InputType;
import android.util.Base64;
import android.view.View;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class ReviewActivity extends AppCompatActivity {

    private EditText commentBox;
    private WebView webView;
    private Button submitButton;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_review);

        webView = (WebView) findViewById(R.id.documentView);
        // TODO: Make this functional
        displayDocument("", webView);

        commentBox = (EditText) findViewById(R.id.commentBox);

        submitButton = (Button) findViewById(R.id.submitButton);
        submitButton.setOnClickListener(this::onClickSubmit);
    }

    private void onClickSubmit(View v) {
        AlertDialog.Builder builder = new AlertDialog.Builder(ReviewActivity.this);
        builder.setCancelable(true);
        builder.setTitle(R.string.confirmation_title);
        builder.setMessage(R.string.confirmation_prompt);
        builder.setPositiveButton("Submit",
                new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        // TODO: Save commentBox.getText() to something useful like User object(?)
                        Intent intent = new Intent(ReviewActivity.this, MenuActivity.class);
                        startActivity(intent);
                    }
                });
        builder.setNegativeButton(android.R.string.cancel, new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
            }
        });

        AlertDialog dialog = builder.create();
        dialog.setOnShowListener( new DialogInterface.OnShowListener() {
            @Override
            public void onShow(DialogInterface arg0) {
                dialog.getButton(AlertDialog.BUTTON_POSITIVE).setTextColor(Color.BLACK);
                dialog.getButton(AlertDialog.BUTTON_NEGATIVE).setTextColor(Color.BLACK);
            }
        });
        dialog.show();
    }

    public static void displayDocument(String link, WebView webView) {
        // looks fine: 0" margin, 12-14 pt font size
        String link4 = "https://docs.google.com/document/d/e/2PACX-1vStS51jKgVXMurxsmd6N4gMVZpuTzEnPsmAdjfWad56Bl7iYAHxwu1wbetV5nXg5IuoAlh4gzCo0QwR/pub";
        // ignores some formatting like page numbers or certain fonts(?)
        String link5 = "https://docs.google.com/document/d/e/2PACX-1vSS6GGY5v9Co51dJG7ATf76PjSZcNrKa96vysHg9rm7yzPmffFJNZJOGFC89hv0BEunCqfdr2y-UV_p/pub";

//        String doc="<iframe src=\"" + link4 + "\" width='100%' height='100%' style='margin:0;padding:0;border:0;' display:block></iframe>";
//        webView.loadData(doc, "text/html",  "UTF-8");

        // TODO: Get something like this to work
        // Look back at RegexExample
        // Alternatively, figure out how to include HTML parser
        // Check for legality of removing banner
        // Figure out how to do network stuff in different thread
        String doc = "<!DOCTYPE html><html><head><title>Copy of Sample Essay</title><link rel=\"shortcut icon\" href=\"https://ssl.gstatic.com/docs/documents/images/kix-favicon7.ico\"><meta name=\"referrer\" content=\"origin\"><style type=\"text/css\" nonce=\"RpBIrhnXp/XyaY4oWiOBxQ\">      @import url(\"https://fonts.googleapis.com/css?family=Google+Sans_old\");      @import url(\"https://fonts.googleapis.com/css?family=Roboto\");      body {        font-family: Roboto, arial, sans, sans-serif;        margin: 0;      }      iframe {        border: 0;        frameborder: 0;        height: 100%;        width: 100%;      }      #banners {        align-items: center;        background: white;        display: block;        justify-content: space-between;        position: fixed;        top: 0;        width: 100%;        z-index: 100;      }      #banners #publish-banner {        background-color: #e8f0fe;        border-bottom: 1px #ccc solid;        color: #202124;        display: flex;        flex: 1 1 0%;        height: 60px;        width: 100%;      }      #publish-banner-icon {        display: flex;        fill: #1967d2;        margin: auto 20px;      }      #publish-banner-text {        flex-grow: 1;        margin: auto 0;        overflow: hidden;        text-overflow: ellipsis;        white-space: nowrap;      }      #publish-banner-buttons {        margin: auto 25px auto 0;      }      #publish-banner-buttons span {        align-self: center;        background-color: inherit;        border: none;        font-family: \"Google Sans\", Roboto, RobotoDraft, Helvetica, Arial, sans-serif;        margin: 0 16px 0 32px;      }      #publish-banner-buttons a {        color: #1967d2;        cursor: pointer;        font-family: \"Google Sans\", Roboto, RobotoDraft, Helvetica, Arial, sans-serif;        font-size: 14px;        font-weight: 500;        line-height: 24px;        text-decoration: none;      }      #banners #title-banner {        background: white;        border-bottom: 1px #ccc solid;        display: flex;        flex: 1 1 0%;        height: 60px;        width: 100%;      }      #banners #title-banner #title {        flex-grow: 1;        font-family: 'Google Sans';        font-size: large;        margin: auto 0 auto 20px;        overflow: hidden;        text-overflow: ellipsis;        white-space: nowrap;        width: 70%;      }      #banners #title-banner #interval {        margin: auto 25px auto 0;        font-family: Roboto;        font-size: small;;      }      #footer {        background: #f0f0f0;        border-bottom: 1px #ccc solid;        bottom: 0;        font-family: Roboto;        font-size: small;        padding: 10px 10px;        position: fixed;        text-align: center;        width: 100%;      }      #contents {        padding: 100px 20% 50px 20%;      }      @media only screen and (max-device-width: 800px) {        #banners #title-banner {          border-bottom-width: 5px;          height: auto;          display: block;        }        #banners #title-banner #title {          font-size: 3em;          margin: auto 0 auto 20px;          width: 90%;        }        #banners #title-banner #interval {          font-size: 1.5em;          margin: 10px 0 auto 25px;        }        #contents {          padding: 150px 5% 80px;        }        #footer {          font-size: 2em;        }      }      .dash {        padding: 0 6px;      }    </style></head><body><div id=\"banners\"><div id=\"title-banner\"><div id=\"title\">Copy of Sample Essay</div></div></div><div id=\"contents\"><style type=\"text/css\">ol{margin:0;padding:0}table td,table th{padding:0}.c2{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:\"Arial\";font-style:normal}.c4{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:\"Arial\";font-style:normal}.c0{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c3{background-color:#ffffff;max-width:612pt;padding:0pt 0pt 0pt 0pt}.c1{height:11pt}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:\"Arial\";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:\"Arial\";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:\"Arial\"}p{margin:0;color:#000000;font-size:11pt;font-family:\"Arial\"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:\"Arial\";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:\"Arial\";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:\"Arial\";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:\"Arial\";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:\"Arial\";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:\"Arial\";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style><div class=\"c3\"><p class=\"c0\"><span class=\"c2\">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Pellentesque diam volutpat commodo sed egestas egestas fringilla phasellus. Morbi tristique senectus et netus et malesuada fames. Gravida arcu ac tortor dignissim convallis. Est velit egestas dui id ornare arcu odio ut. Pretium quam vulputate dignissim suspendisse in est ante in. Non odio euismod lacinia at quis. Neque gravida in fermentum et sollicitudin ac. Sem nulla pharetra diam sit amet nisl. Egestas congue quisque egestas diam in arcu cursus. Duis convallis convallis tellus id interdum velit laoreet id. Vitae tempus quam pellentesque nec nam aliquam sem et. Tortor pretium viverra suspendisse potenti nullam ac tortor vitae. Condimentum mattis pellentesque id nibh tortor id aliquet. Euismod lacinia at quis risus sed. Faucibus purus in massa tempor nec feugiat nisl pretium fusce. Nunc congue nisi vitae suscipit tellus. Vulputate sapien nec sagittis aliquam malesuada. Adipiscing elit pellentesque habitant morbi tristique senectus.</span></p><p class=\"c0 c1\"><span class=\"c2\"></span></p><p class=\"c0\"><span class=\"c2\">Eget egestas purus viverra accumsan in nisl. Consectetur a erat nam at. Lacus laoreet non curabitur gravida arcu ac tortor. Vulputate sapien nec sagittis aliquam malesuada bibendum arcu vitae. Urna porttitor rhoncus dolor purus non enim. Turpis egestas sed tempus urna et pharetra pharetra massa massa. Nisl suscipit adipiscing bibendum est ultricies integer quis. Nibh praesent tristique magna sit amet purus gravida quis. Dolor morbi non arcu risus quis varius quam. Urna nec tincidunt praesent semper feugiat nibh sed. Pulvinar elementum integer enim neque volutpat. Feugiat in fermentum posuere urna nec tincidunt praesent semper. Rhoncus urna neque viverra justo nec ultrices. Pellentesque nec nam aliquam sem et tortor consequat id porta.</span></p><p class=\"c0 c1\"><span class=\"c2\"></span></p><p class=\"c0\"><span class=\"c2\">Bibendum enim facilisis gravida neque convallis a cras semper auctor. Vitae turpis massa sed elementum tempus egestas. Augue lacus viverra vitae congue eu consequat. Ut enim blandit volutpat maecenas volutpat. Ultricies mi quis hendrerit dolor magna eget. Neque egestas congue quisque egestas. Pellentesque habitant morbi tristique senectus. Nisi quis eleifend quam adipiscing vitae proin sagittis nisl rhoncus. Commodo ullamcorper a lacus vestibulum sed arcu non odio euismod. Lorem ipsum dolor sit amet. At tellus at urna condimentum. Enim blandit volutpat maecenas volutpat blandit aliquam etiam erat velit. Nisl tincidunt eget nullam non nisi est sit amet facilisis.</span></p><p class=\"c0 c1\"><span class=\"c2\"></span></p><p class=\"c0\"><span class=\"c2\">Ullamcorper velit sed ullamcorper morbi tincidunt ornare massa. Eu consequat ac felis donec et odio pellentesque. Tempor orci eu lobortis elementum. Dui id ornare arcu odio ut sem nulla. Dictumst vestibulum rhoncus est pellentesque elit. Dolor sit amet consectetur adipiscing elit ut aliquam. Viverra orci sagittis eu volutpat odio facilisis mauris sit amet. Diam ut venenatis tellus in metus vulputate eu. Tellus id interdum velit laoreet id. Ut faucibus pulvinar elementum integer enim neque volutpat. Mattis vulputate enim nulla aliquet. Malesuada proin libero nunc consequat interdum varius. Tincidunt vitae semper quis lectus nulla. Rutrum quisque non tellus orci ac auctor.</span></p><p class=\"c0 c1\"><span class=\"c2\"></span></p><p class=\"c0\"><span class=\"c2\">Proin libero nunc consequat interdum. In tellus integer feugiat scelerisque varius morbi enim. Nam aliquam sem et tortor consequat id porta nibh venenatis. Nulla malesuada pellentesque elit eget gravida cum sociis natoque. Suspendisse potenti nullam ac tortor vitae purus faucibus ornare suspendisse. Commodo ullamcorper a lacus vestibulum sed arcu. Praesent semper feugiat nibh sed pulvinar proin gravida hendrerit lectus. Ultricies lacus sed turpis tincidunt id aliquet. Sem integer vitae justo eget magna fermentum iaculis eu non. Imperdiet proin fermentum leo vel orci. Donec et odio pellentesque diam volutpat commodo sed. Ut sem nulla pharetra diam sit amet. Ac orci phasellus egestas tellus rutrum. Sem fringilla ut morbi tincidunt augue interdum velit euismod. Nunc sed velit dignissim sodales ut eu. Lorem donec massa sapien faucibus et molestie ac feugiat sed.</span></p><p class=\"c0 c1\"><span class=\"c2\"></span></p><p class=\"c0 c1\"><span class=\"c4\"></span></p></div></div><script type=\"text/javascript\" nonce=\"LSIOqCvBNb7Jz1hMUysN9Q\">(function(){/* Copyright The Closure Library Authors. SPDX-License-Identifier: Apache-2.0*/var aa=\"function\"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},ba=\"function\"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};function ca(a){a=[\"object\"==typeof globalThis&&globalThis,a,\"object\"==typeof window&&window,\"object\"==typeof self&&self,\"object\"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error(\"Cannot find global object\");}var da=ca(this);function ea(a,b){if(b)a:{var c=da;a=a.split(\".\");for(var d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))break a;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&ba(c,a,{configurable:!0,writable:!0,value:b})}}var k;if(\"function\"==typeof Object.setPrototypeOf)k=Object.setPrototypeOf;else{var l;a:{var fa={a:!0},ha={};try{ha.__proto__=fa;l=ha.a;break a}catch(a){}l=!1}k=l?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+\" is not extensible\");return a}:null}var ia=k;function m(a,b){a.prototype=aa(b.prototype);a.prototype.constructor=a;if(ia)ia(a,b);else for(var c in b)if(\"prototype\"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.m=b.prototype}ea(\"Object.is\",function(a){return a?a:function(b,c){return b===c?0!==b||1/b===1/c:b!==b&&c!==c}});var n=this||self;function p(){}function q(a){var b=typeof a;return\"object\"==b&&null!=a||\"function\"==b}function ja(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var d=c.slice();d.push.apply(d,arguments);return a.apply(this,d)}}function ka(a,b){function c(){}c.prototype=b.prototype;a.m=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.D=function(d,e,f){for(var g=Array(arguments.length-2),h=2;h<arguments.length;h++)g[h-2]=arguments[h];return b.prototype[e].apply(d,g)}}function r(a){return a};function t(a){t[\" \"](a);return a}t[\" \"]=p;function la(a,b,c){return Object.prototype.hasOwnProperty.call(a,b)?a[b]:a[b]=c(b)};function ma(a){return la(a.prototype,\"$$generatedClassName\",function(){return\"Class$obf_\"+{valueOf:function(){return++na}}})}var na=1E3;function v(){}v.prototype.s=function(){return this.j||(Object.defineProperties(this,{j:{value:oa=oa+1|0,enumerable:!1}}),this.j)};v.prototype.toString=function(){var a=w(x(pa(this.constructor)))+\"@\";var b=(this.s()>>>0).toString(16);return a+w(b)};function y(){}m(y,v);y.prototype.h=function(a){this.g=a;if(a instanceof Object)try{a.v=this}catch(b){}};function qa(a){a.g instanceof Error&&(Error.captureStackTrace?Error.captureStackTrace(a.g):a.g.stack=Error().stack)}y.prototype.toString=function(){var a=x(pa(this.constructor)),b=this.l;return null==b?a:w(a)+\": \"+w(b)};function ra(a){if(null!=a){var b=a.v;if(null!=b)return b}a instanceof TypeError?(b=new sa,b.l=w(a),qa(b),b.i=a,b.h(new TypeError(b)),a=b):(b=new z,b.l=w(a),qa(b),b.i=a,b.h(Error(b)),a=b);return a};function A(){}m(A,y);function B(){}m(B,A);function z(){}m(z,B);z.prototype.h=function(a){B.prototype.h.call(this,\"__noinit__\"===this.i?a:this.i)};function sa(){}m(sa,z);var oa=0;function ta(a,b){return\"string\"==typeof a?a.charCodeAt(b):a.g(b)};function C(){}var ua,va;m(C,v);function wa(){wa=function(){};va=new D;ua=new E};function D(){}m(D,C);D.prototype.toString=function(){return\"\"};function E(){}m(E,C);E.prototype.toString=function(){return\"unknown\"};function w(a){return null==a?\"null\":a.toString()}function xa(a){return 65536<=a?w(String.fromCharCode((55296+((a-65536|0)>>10&1023)|0)&65535))+w(String.fromCharCode((56320+((a-65536|0)&1023)|0)&65535)):String.fromCharCode(a&65535)}function ya(a,b){var c=b,d=a.length,e;b=ta(a,(e=c,c=c+1|0,e));var f;if(e=55296<=b&&56319>=b&&c<d)a=f=ta(a,c),e=56320<=a&&57343>=a;var g;e?g=65536+((b&1023)<<10)+(f&1023)|0:g=b;return g};function F(a,b){this.g=a;this.h=b}m(F,v);function x(a){if(0!=a.h){var b=\"L\"+w(ma(a.g))+\";\";a=a.h;for(var c=\"\",d=0;d<a;d=d+1|0)c=w(c)+\"[\";return w(c)+w(b)}return ma(a.g)}F.prototype.toString=function(){return\"class \"+w(x(this))};function pa(a){return la(a.prototype,\"$$class/0\",function(){return new F(a,0)})};function za(a){var b=a;try{var c;if(c=\"www.google.com\"===Aa(a)){var d=Ba(a)[5];c=\"/url\"===G(d,!0)}if(c){var e=Ca(a,\"q\");b=e?e:Ca(a,\"url\")}}catch(f){if(f=ra(f),!(f instanceof A))throw f.g;}return null!=b?b:\"\"};function G(a,b){return null==a?a:b?decodeURI(a):decodeURIComponent(a)};var Da;function Ba(a){H();a=Da.exec(a);for(var b=[],c=0;7>=c;c=c+1|0)a.length<=c||null==a[c]?b.push(null):b.push(a[c]);return b}function Aa(a){a=Ba(a);return G(a[3],!0)}function Ca(a,b){H();var c=a.indexOf(xa(35));c=0>c?a.length:c;a:{var d=0;for(var e=b.length;0<(d=a.indexOf(b,d))&&d<c;){var f=ya(a,d-1|0);if(38==f||63==f){if((d+e|0)>=a.length)break a;f=ya(a,d+e|0);if(61==f||38==f||35==f)break a}d=d+(e+1)|0}d=-1}if(0>d)return null;e=a.indexOf(xa(38),d);if(0>e||e>c)e=c;d=d+(b.length+1)|0;b=Math.min(a.length,d);a=a.substr(b,Math.min(a.length,Math.max(d,e))-b|0);c=\" \";for(b=0;0<=(b=c.indexOf(\"\\\\\",b));)36==c.charCodeAt(b+1|0)?(d=w(c.substr(0,b|0))+\"$\",e=b=b+1|0,c=d+w(c.substr(e))):(d=w(c.substr(0,b|0)),e=b=b+1|0,c=d+w(c.substr(e)));a=a.replace(RegExp(\"\\\\+\",\"g\"),c);return G(a,!1)}function H(){H=function(){};Da=RegExp(\"^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\\\?([^#]*))?(?:#([\\\\S\\\\s]*))?$\")};var Ea=/&/g,Fa=/</g,Ga=/>/g,Ha=/\"/g,Ia=/'/g,Ja=/\\x00/g,Ka=/[\\x00&<>\"']/;function La(){var a=n.navigator;return a&&(a=a.userAgent)?a:\"\"}function I(a){return-1!=La().indexOf(a)};var Ma=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if(\"string\"===typeof a)return\"string\"!==typeof b||1!=b.length?-1:a.indexOf(b,0);for(var c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1};var Na=I(\"Trident\")||I(\"MSIE\"),Oa=I(\"Edge\")||Na,Pa=I(\"Gecko\")&&!(-1!=La().toLowerCase().indexOf(\"webkit\")&&!I(\"Edge\"))&&!(I(\"Trident\")||I(\"MSIE\"))&&!I(\"Edge\"),Qa=I(\"Macintosh\");function Ra(a){a&&\"function\"==typeof a.u&&a.u()};function J(){this.h=this.h;this.g=this.g}J.prototype.h=!1;J.prototype.u=function(){this.h||(this.h=!0,this.j())};J.prototype.j=function(){if(this.g)for(;this.g.length;)this.g.shift()()};function Sa(a,b,c){for(var d in a)b.call(c,a[d],d,a)};var K;function L(a,b){this.i=a===Ta&&b||\"\";this.j=Ua}L.prototype.h=!0;L.prototype.g=function(){return this.i};var Ua={},Ta={};function M(a,b){this.i=b===N?a:\"\"}M.prototype.h=!0;M.prototype.g=function(){return this.i.toString()};M.prototype.toString=function(){return this.i.toString()};function O(a){return a instanceof M&&a.constructor===M?a.i:\"type_error:SafeUrl\"}var Va=/^data:(.*);base64,[a-z0-9+\\/]+=*$/i,Wa=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Xa(a){if(a instanceof M)return a;a=\"object\"==typeof a&&a.h?a.g():String(a);Wa.test(a)||(a=\"about:invalid#zClosurez\");return new M(a,N)}var N={},Ya=new M(\"about:invalid#zClosurez\",N);var Za={};function P(a,b,c){this.i=c===Za?a:\"\";this.h=!0}P.prototype.g=function(){return this.i.toString()};P.prototype.toString=function(){return this.i.toString()};function $a(a,b,c,d){a=a instanceof M?a:Xa(a);b=b||n;c=c instanceof L?c instanceof L&&c.constructor===L&&c.j===Ua?c.i:\"type_error:Const\":c||\"\";return void 0!==d?b.open(O(a),c,d):b.open(O(a),c)};function Q(a,b){this.type=a;this.target=b;this.i=!1}Q.prototype.g=function(){this.i=!0};var ab=function(){if(!n.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},\"passive\",{get:function(){a=!0}});try{n.addEventListener(\"test\",p,b),n.removeEventListener(\"test\",p,b)}catch(c){}return a}();function R(a){Q.call(this,a?a.type:\"\");this.relatedTarget=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=0;this.key=\"\";this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.state=null;this.pointerId=0;this.pointerType=\"\";this.h=null;if(a){var b=this.type=a.type,c=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement;var d=a.relatedTarget;if(d){if(Pa){a:{try{t(d.nodeName);var e=!0;break a}catch(f){}e=!1}e||(d=null)}}else\"mouseover\"==b?d=a.fromElement:\"mouseout\"==b&&(d=a.toElement);this.relatedTarget=d;c?(this.clientX=void 0!==c.clientX?c.clientX:c.pageX,this.clientY=void 0!==c.clientY?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0);this.button=a.button;this.key=a.key||\"\";this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.pointerId=a.pointerId||0;this.pointerType=\"string\"===typeof a.pointerType?a.pointerType:bb[a.pointerType]||\"\";this.state=a.state;this.h=a;a.defaultPrevented&&R.m.g.call(this)}}ka(R,Q);var bb={2:\"touch\",3:\"pen\",4:\"mouse\"};R.prototype.g=function(){R.m.g.call(this);var a=this.h;a.preventDefault?a.preventDefault():a.returnValue=!1};var S=\"closure_listenable_\"+(1E6*Math.random()|0);var cb=0;function db(a,b,c,d,e){this.listener=a;this.proxy=null;this.src=b;this.type=c;this.capture=!!d;this.h=e;this.key=++cb;this.g=this.o=!1}function eb(a){a.g=!0;a.listener=null;a.proxy=null;a.src=null;a.h=null};function T(a){this.src=a;this.g={};this.h=0}T.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.g[f];a||(a=this.g[f]=[],this.h++);var g;a:{for(g=0;g<a.length;++g){var h=a[g];if(!h.g&&h.listener==b&&h.capture==!!d&&h.h==e)break a}g=-1}-1<g?(b=a[g],c||(b.o=!1)):(b=new db(b,this.src,f,!!d,e),b.o=c,a.push(b));return b};var U=\"closure_lm_\"+(1E6*Math.random()|0),V={},fb=0;function gb(a,b,c,d,e){if(d&&d.once)return hb(a,b,c,d,e);if(Array.isArray(b)){for(var f=0;f<b.length;f++)gb(a,b[f],c,d,e);return null}c=ib(c);return a&&a[S]?a.g(b,c,q(d)?!!d.capture:!!d,e):jb(a,b,c,!1,d,e)}function jb(a,b,c,d,e,f){if(!b)throw Error(\"Invalid event type\");var g=q(e)?!!e.capture:!!e,h=kb(a);h||(a[U]=h=new T(a));c=h.add(b,c,d,g,f);if(c.proxy)return c;d=lb();c.proxy=d;d.src=a;d.listener=c;if(a.addEventListener)ab||(e=g),void 0===e&&(e=!1),a.addEventListener(b.toString(),d,e);else if(a.attachEvent)a.attachEvent(mb(b.toString()),d);else if(a.addListener&&a.removeListener)a.addListener(d);else throw Error(\"addEventListener and attachEvent are unavailable.\");fb++;return c}function lb(){function a(c){return b.call(a.src,a.listener,c)}var b=nb;return a}function hb(a,b,c,d,e){if(Array.isArray(b)){for(var f=0;f<b.length;f++)hb(a,b[f],c,d,e);return null}c=ib(c);return a&&a[S]?a.h(b,c,q(d)?!!d.capture:!!d,e):jb(a,b,c,!0,d,e)}function ob(a){if(\"number\"!==typeof a&&a&&!a.g){var b=a.src;if(b&&b[S])b.i(a);else{var c=a.type,d=a.proxy;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent?b.detachEvent(mb(c),d):b.addListener&&b.removeListener&&b.removeListener(d);fb--;if(c=kb(b)){d=a.type;if(d in c.g){var e=c.g[d],f=Ma(e,a),g;(g=0<=f)&&Array.prototype.splice.call(e,f,1);g&&(eb(a),0==c.g[d].length&&(delete c.g[d],c.h--))}0==c.h&&(c.src=null,b[U]=null)}else eb(a)}}}function mb(a){return a in V?V[a]:V[a]=\"on\"+a}function nb(a,b){if(a.g)a=!0;else{b=new R(b,this);var c=a.listener,d=a.h||a.src;a.o&&ob(a);a=c.call(d,b)}return a}function kb(a){a=a[U];return a instanceof T?a:null}var pb=\"__closure_events_fn_\"+(1E9*Math.random()>>>0);function ib(a){if(\"function\"===typeof a)return a;a[pb]||(a[pb]=function(b){return a.handleEvent(b)});return a[pb]};function W(a){J.call(this);this.l=a;this.i={}}ka(W,J);var qb=[];function rb(a){Sa(a.i,function(b,c){this.i.hasOwnProperty(c)&&ob(b)},a);a.i={}}W.prototype.j=function(){W.m.j.call(this);rb(this)};W.prototype.handleEvent=function(){throw Error(\"EventHandler.handleEvent not implemented\");};function sb(a,b,c,d){b=void 0===b?!1:b;c=void 0===c?!1:c;d=void 0===d?\"editors\":d;J.call(this);this.i=a||document.body;this.s=!!b;this.A=!!c;this.B=d;this.l=new W(this);a=ja(Ra,this.l);this.h?a():(this.g||(this.g=[]),this.g.push(a));a=this.l;b=this.i;c=this.C;d=\"click\";Array.isArray(d)||(d&&(qb[0]=d.toString()),d=qb);for(var e=0;e<d.length;e++){var f=gb(b,d[e],c||a.handleEvent,!1,a.l||a);if(!f)break;a.i[f.key]=f}}m(sb,J);sb.prototype.C=function(a){if(!(0!=a.h.button||Qa&&a.ctrlKey||a.i))for(var b=a.target;b&&b!=this.i;){if(b.tagName&&\"a\"==b.tagName.toLowerCase()){var c=b.getAttribute(\"href\")||b.getAttributeNS(\"http://www.w3.org/1999/xlink\",\"href\"),d=za(c);if(c!=d){a:{b=void 0;try{b=Aa(d)}catch(u){u=ra(u);if(u instanceof A){b=!1;break a}throw u.g;}var e;if(e=null!=b){e=(wa(),va);var f=ua;b=Object.is(e,f)||null==e&&null==f?b.toLocaleLowerCase():b.toLowerCase();e=\".google.com\"===b.substr(b.length-11|0,11)}b=e}if(!b)if(this.A){c=za(d);if(Object.is(c,d)||null==c&&null==d)d=\"//www.google.com/url?q=\"+w(encodeURIComponent(d)),d=w(d)+\"&sa=D\";d+=\"&source=\"+this.B}else d=this.s?c:d;var g=d;b=void 0;c={target:\"_blank\",noreferrer:!0};d=window;g instanceof M?e=g:(e=\"undefined\"!=typeof g.href?g.href:String(g),e instanceof M||(e=\"object\"==typeof e&&e.h?e.g():String(e),Wa.test(e)?e=new M(e,N):(e=String(e),e=e.replace(/(%0A|%0D)/g,\"\"),e=e.match(Va)?new M(e,N):null)),e=e||Ya);var h=void 0!==self.crossOriginIsolated;f=\"strict-origin-when-cross-origin\";window.Request&&(f=(new Request(\"/\")).referrerPolicy);var ub=\"unsafe-url\"===f;f=c.noreferrer;if(h&&f){if(ub)throw Error(\"Cannot use the noreferrer option on a page that sets a referrer-policy of `unsafe-url` in modern browsers!\");f=!1}g=c.target||g.target;h=[];for(b in c)switch(b){case \"width\":case \"height\":case \"top\":case \"left\":h.push(b+\"=\"+c[b]);break;case \"target\":case \"noopener\":case \"noreferrer\":break;default:h.push(b+\"=\"+(c[b]?1:0))}b=h.join(\",\");if((I(\"iPhone\")&&!I(\"iPod\")&&!I(\"iPad\")||I(\"iPad\")||I(\"iPod\"))&&d.navigator&&d.navigator.standalone&&g&&\"_self\"!=g)c=\"A\",b=document,c=String(c),\"application/xhtml+xml\"===b.contentType&&(c=c.toLowerCase()),b=c=b.createElement(c),e=e instanceof M?e:Xa(e),b.href=O(e),c.setAttribute(\"target\",g),f&&c.setAttribute(\"rel\",\"noreferrer\"),b=document.createEvent(\"MouseEvent\"),b.initMouseEvent(\"click\",!0,!0,d,1),c.dispatchEvent(b);else if(f){if(d=$a(\"\",d,g,b),c=O(e),d){Oa&&-1!=c.indexOf(\";\")&&(c=\"'\"+c.replace(/'/g,\"%27\")+\"'\");d.opener=null;\"\"===c&&(c=\"javascript:''\");Ka.test(c)&&(-1!=c.indexOf(\"&\")&&(c=c.replace(Ea,\"&amp;\")),-1!=c.indexOf(\"<\")&&(c=c.replace(Fa,\"&lt;\")),-1!=c.indexOf(\">\")&&(c=c.replace(Ga,\"&gt;\")),-1!=c.indexOf('\"')&&(c=c.replace(Ha,\"&quot;\")),-1!=c.indexOf(\"'\")&&(c=c.replace(Ia,\"&#39;\")),-1!=c.indexOf(\"\\x00\")&&(c=c.replace(Ja,\"&#0;\")));c='<meta name=\"referrer\" content=\"no-referrer\"><meta http-equiv=\"refresh\" content=\"0; url='+c+'\">';if(void 0===K)if(b=null,(e=n.trustedTypes)&&e.createPolicy){try{b=e.createPolicy(\"goog#html\",{createHTML:r,createScript:r,createScriptURL:r})}catch(u){n.console&&n.console.error(u.message)}K=b}else K=b;c=(b=K)?b.createHTML(c):c;c=new P(c,null,Za);(d=d.document)&&d.write&&(d.write(c instanceof P&&c.constructor===P?c.i:\"type_error:SafeHtml\"),d.close())}}else(d=$a(e,d,g,b))&&c.noopener&&(d.opener=null);a.g();break}}b=b.parentNode}};function tb(a,b,c,d){new sb(a,void 0===b?!1:b,void 0===c?!1:c,d)}var X=[\"DOCS_installLinkReferrerSanitizer\"],Y=n;X[0]in Y||\"undefined\"==typeof Y.execScript||Y.execScript(\"var \"+X[0]);for(var Z;X.length&&(Z=X.shift());)X.length||void 0===tb?Y[Z]&&Y[Z]!==Object.prototype[Z]?Y=Y[Z]:Y=Y[Z]={}:Y[Z]=tb;}).call(this);</script><script type=\"text/javascript\" nonce=\"LSIOqCvBNb7Jz1hMUysN9Q\">DOCS_installLinkReferrerSanitizer( undefined,  true,  true, 'docs');</script></body></html>";
        String encodedHtml = Base64.encodeToString(doc.getBytes(), Base64.NO_PADDING);
        webView.loadData(encodedHtml, "text/html", "base64");

    }
}